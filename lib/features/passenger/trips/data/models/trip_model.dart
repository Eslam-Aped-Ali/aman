import '../../domain/entities/trip.dart';

class TripModel extends Trip {
  const TripModel({
    required super.id,
    required super.fromLocation,
    required super.toLocation,
    required super.fromLocationAr,
    required super.toLocationAr,
    required super.price,
    required super.duration,
    required super.rating,
    required super.busType,
    required super.availableSeats,
    required super.totalSeats,
    required super.departureTime,
    required super.arrivalTime,
    required super.operatorName,
    required super.operatorLogo,
    required super.amenities,
    required super.stops,
    required super.isDirectRoute,
    required super.busNumber,
    required super.driverName,
    required super.driverPhone,
    required super.status,
    super.discount,
    super.isPopular,
    super.images,
  });

  factory TripModel.fromJson(Map<String, dynamic> json) {
    return TripModel(
      id: json['id'] as String,
      fromLocation: json['fromLocation'] as String,
      toLocation: json['toLocation'] as String,
      fromLocationAr: json['fromLocationAr'] as String,
      toLocationAr: json['toLocationAr'] as String,
      price: (json['price'] as num).toDouble(),
      duration: json['duration'] as String,
      rating: (json['rating'] as num).toDouble(),
      busType: json['busType'] as String,
      availableSeats: json['availableSeats'] as int,
      totalSeats: json['totalSeats'] as int,
      departureTime: DateTime.parse(json['departureTime'] as String),
      arrivalTime: DateTime.parse(json['arrivalTime'] as String),
      operatorName: json['operatorName'] as String,
      operatorLogo: json['operatorLogo'] as String,
      amenities: List<String>.from(json['amenities'] as List),
      stops: List<String>.from(json['stops'] as List),
      isDirectRoute: json['isDirectRoute'] as bool,
      busNumber: json['busNumber'] as String,
      driverName: json['driverName'] as String,
      driverPhone: json['driverPhone'] as String,
      status: TripStatus.values.firstWhere(
        (e) => e.toString().split('.').last == json['status'],
        orElse: () => TripStatus.scheduled,
      ),
      discount: (json['discount'] as num?)?.toDouble() ?? 0.0,
      isPopular: json['isPopular'] as bool? ?? false,
      images: json['images'] != null
          ? List<String>.from(json['images'] as List)
          : [],
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'fromLocation': fromLocation,
      'toLocation': toLocation,
      'fromLocationAr': fromLocationAr,
      'toLocationAr': toLocationAr,
      'price': price,
      'duration': duration,
      'rating': rating,
      'busType': busType,
      'availableSeats': availableSeats,
      'totalSeats': totalSeats,
      'departureTime': departureTime.toIso8601String(),
      'arrivalTime': arrivalTime.toIso8601String(),
      'operatorName': operatorName,
      'operatorLogo': operatorLogo,
      'amenities': amenities,
      'stops': stops,
      'isDirectRoute': isDirectRoute,
      'busNumber': busNumber,
      'driverName': driverName,
      'driverPhone': driverPhone,
      'status': status.toString().split('.').last,
      'discount': discount,
      'isPopular': isPopular,
      'images': images,
    };
  }

  // Dummy data generator
  static List<TripModel> getDummyTrips() {
    final now = DateTime.now();
    return [
      TripModel(
        id: '1',
        fromLocation: 'muscat',
        toLocation: 'nizwa',
        fromLocationAr: 'مسقط',
        toLocationAr: 'نزوى',
        price: 12.0,
        duration: '1h 45m',
        rating: 4.5,
        busType: 'acSleeper',
        availableSeats: 15,
        totalSeats: 40,
        departureTime: now.add(const Duration(hours: 2)),
        arrivalTime: now.add(const Duration(hours: 3, minutes: 45)),
        operatorName: 'Oman National Transport',
        operatorLogo: 'assets/images/operators/ont_logo.png',
        amenities: ['wifi', 'ac', 'charging', 'entertainment'],
        stops: ['Seeb', 'Barka', 'Rustaq'],
        isDirectRoute: false,
        busNumber: 'ON-001',
        driverName: 'Ahmed Al-Rashid',
        driverPhone: '+968 9123 4567',
        status: TripStatus.scheduled,
        discount: 10.0,
        isPopular: true,
        images: ['assets/images/buses/bus1.jpg'],
      ),
      TripModel(
        id: '2',
        fromLocation: 'salalah',
        toLocation: 'muscat',
        fromLocationAr: 'صلالة',
        toLocationAr: 'مسقط',
        price: 25.0,
        duration: '3h 30m',
        rating: 4.8,
        busType: 'acDeluxe',
        availableSeats: 8,
        totalSeats: 35,
        departureTime: now.add(const Duration(hours: 1)),
        arrivalTime: now.add(const Duration(hours: 4, minutes: 30)),
        operatorName: 'Dhofar Express',
        operatorLogo: 'assets/images/operators/dhofar_logo.png',
        amenities: ['wifi', 'ac', 'charging', 'meals', 'entertainment'],
        stops: ['Thumrait', 'Adam'],
        isDirectRoute: false,
        busNumber: 'DE-105',
        driverName: 'Mohammed Al-Kathiri',
        driverPhone: '+968 9234 5678',
        status: TripStatus.scheduled,
        discount: 5.0,
        isPopular: true,
        images: ['assets/images/buses/bus2.jpg'],
      ),
      TripModel(
        id: '3',
        fromLocation: 'sohar',
        toLocation: 'muscat',
        fromLocationAr: 'صحار',
        toLocationAr: 'مسقط',
        price: 8.0,
        duration: '2h 15m',
        rating: 4.3,
        busType: 'nonAc',
        availableSeats: 22,
        totalSeats: 45,
        departureTime: now.add(const Duration(hours: 3)),
        arrivalTime: now.add(const Duration(hours: 5, minutes: 15)),
        operatorName: 'Batinah Transport',
        operatorLogo: 'assets/images/operators/batinah_logo.png',
        amenities: ['charging'],
        stops: ['Shinas', 'Saham', 'Barka'],
        isDirectRoute: false,
        busNumber: 'BT-203',
        driverName: 'Khalid Al-Balushi',
        driverPhone: '+968 9345 6789',
        status: TripStatus.scheduled,
        isPopular: false,
        images: ['assets/images/buses/bus3.jpg'],
      ),
      TripModel(
        id: '4',
        fromLocation: 'sur',
        toLocation: 'muscat',
        fromLocationAr: 'صور',
        toLocationAr: 'مسقط',
        price: 15.0,
        duration: '2h 30m',
        rating: 4.6,
        busType: 'ac',
        availableSeats: 5,
        totalSeats: 30,
        departureTime: now.add(const Duration(hours: 4)),
        arrivalTime: now.add(const Duration(hours: 6, minutes: 30)),
        operatorName: 'Sharqiyah Lines',
        operatorLogo: 'assets/images/operators/sharqiyah_logo.png',
        amenities: ['wifi', 'ac', 'charging'],
        stops: ['Quriyat', 'Tiwi'],
        isDirectRoute: false,
        busNumber: 'SL-087',
        driverName: 'Salem Al-Hinai',
        driverPhone: '+968 9456 7890',
        status: TripStatus.scheduled,
        discount: 15.0,
        isPopular: true,
        images: ['assets/images/buses/bus4.jpg'],
      ),
      TripModel(
        id: '5',
        fromLocation: 'ibri',
        toLocation: 'muscat',
        fromLocationAr: 'عبري',
        toLocationAr: 'مسقط',
        price: 18.0,
        duration: '3h 00m',
        rating: 4.2,
        busType: 'acDeluxe',
        availableSeats: 12,
        totalSeats: 38,
        departureTime: now.add(const Duration(hours: 5)),
        arrivalTime: now.add(const Duration(hours: 8)),
        operatorName: 'Dhahirah Transport',
        operatorLogo: 'assets/images/operators/dhahirah_logo.png',
        amenities: ['wifi', 'ac', 'charging', 'entertainment', 'blanket'],
        stops: ['Bahla', 'Nizwa'],
        isDirectRoute: false,
        busNumber: 'DT-156',
        driverName: 'Abdullah Al-Ghafri',
        driverPhone: '+968 9567 8901',
        status: TripStatus.scheduled,
        isPopular: false,
        images: ['assets/images/buses/bus5.jpg'],
      ),
      TripModel(
        id: '6',
        fromLocation: 'rustaq',
        toLocation: 'muscat',
        fromLocationAr: 'الرستاق',
        toLocationAr: 'مسقط',
        price: 10.0,
        duration: '1h 50m',
        rating: 4.4,
        busType: 'ac',
        availableSeats: 18,
        totalSeats: 32,
        departureTime: now.add(const Duration(hours: 6)),
        arrivalTime: now.add(const Duration(hours: 7, minutes: 50)),
        operatorName: 'Hajar Transport',
        operatorLogo: 'assets/images/operators/hajar_logo.png',
        amenities: ['ac', 'charging'],
        stops: ['Nakhal', 'Barka'],
        isDirectRoute: false,
        busNumber: 'HT-092',
        driverName: 'Rashid Al-Kindi',
        driverPhone: '+968 9678 9012',
        status: TripStatus.scheduled,
        discount: 8.0,
        isPopular: false,
        images: ['assets/images/buses/bus6.jpg'],
      ),
      TripModel(
        id: '7',
        fromLocation: 'buraimi',
        toLocation: 'muscat',
        fromLocationAr: 'البريمي',
        toLocationAr: 'مسقط',
        price: 22.0,
        duration: '4h 15m',
        rating: 4.1,
        busType: 'luxury',
        availableSeats: 6,
        totalSeats: 24,
        departureTime: now.add(const Duration(hours: 7)),
        arrivalTime: now.add(const Duration(hours: 11, minutes: 15)),
        operatorName: 'Premium Lines',
        operatorLogo: 'assets/images/operators/premium_logo.png',
        amenities: [
          'wifi',
          'ac',
          'charging',
          'entertainment',
          'meals',
          'blanket',
          'pillow'
        ],
        stops: ['Ibri', 'Nizwa'],
        isDirectRoute: false,
        busNumber: 'PL-024',
        driverName: 'Hamad Al-Dhuhli',
        driverPhone: '+968 9789 0123',
        status: TripStatus.scheduled,
        discount: 20.0,
        isPopular: true,
        images: ['assets/images/buses/luxury_bus.jpg'],
      ),
      TripModel(
        id: '8',
        fromLocation: 'muscat',
        toLocation: 'salalah',
        fromLocationAr: 'مسقط',
        toLocationAr: 'صلالة',
        price: 28.0,
        duration: '3h 45m',
        rating: 4.7,
        busType: 'express',
        availableSeats: 3,
        totalSeats: 28,
        departureTime: now.add(const Duration(hours: 8)),
        arrivalTime: now.add(const Duration(hours: 11, minutes: 45)),
        operatorName: 'Express Connect',
        operatorLogo: 'assets/images/operators/express_logo.png',
        amenities: ['wifi', 'ac', 'charging', 'entertainment', 'meals'],
        stops: [],
        isDirectRoute: true,
        busNumber: 'EC-789',
        driverName: 'Yousuf Al-Mashani',
        driverPhone: '+968 9890 1234',
        status: TripStatus.scheduled,
        isPopular: true,
        images: ['assets/images/buses/express_bus.jpg'],
      ),
    ];
  }

  static List<String> getDummyLocations() {
    return [
      'muscat',
      'nizwa',
      'salalah',
      'sohar',
      'sur',
      'ibri',
      'rustaq',
      'buraimi',
      'seeb',
      'barka',
      'nakhal',
      'bahla',
      'adam',
      'thumrait',
    ];
  }

  static List<String> getDummyOperators() {
    return [
      'Oman National Transport',
      'Dhofar Express',
      'Batinah Transport',
      'Sharqiyah Lines',
      'Dhahirah Transport',
      'Hajar Transport',
      'Premium Lines',
      'Express Connect',
    ];
  }
}
